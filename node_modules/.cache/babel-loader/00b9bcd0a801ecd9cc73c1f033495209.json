{"ast":null,"code":"import _toConsumableArray from\"/Users/tim/DCI/Assignments/spa-final-project-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/tim/DCI/Assignments/spa-final-project-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import ShowModalContext from'../Context/ShowModalContext';import PostContext from'../Context/PostContext';import Time from'./Time';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditModal(_ref){var entry=_ref.entry;var _useContext=useContext(PostContext),posts=_useContext.posts,setPosts=_useContext.setPosts;var _useContext2=useContext(ShowModalContext),show=_useContext2.show,setShow=_useContext2.setShow,edit=_useContext2.edit,setEdit=_useContext2.setEdit;var _useState=useState(entry.title),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(entry.content),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),remove=_useState6[0],setRemove=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),save=_useState8[0],setSave=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),change=_useState10[0],setChange=_useState10[1];function wannaRemove(id){remove==id?setRemove(\"\"):setRemove(id);setSave(\"\");}function wannaSave(id){if(entry.title!==title||entry.content!==content){save==id?setSave(\"\"):setSave(id);setRemove(\"\");}else{setShow(edit);setEdit(\"\");}}function removePost(id){var newPosts=posts.filter(function(post){return post.id!=id;});setEdit(\"\");setPosts(newPosts);}useEffect(function(){var close=function close(e){return e.key==='Escape'?setShow(\"\"):null;};window.addEventListener('keydown',close);return function(){return window.removeEventListener('keydown',close);};},[]);function saveChanges(){if(entry.title!==title||entry.content!==content){var newPosts=posts.filter(function(post){return post.id!=entry.id;});var newPost={id:entry.id,title:title,content:content,time:entry.time,updated:\"\"+Time(),color:entry.color};setPosts([newPost].concat(_toConsumableArray(newPosts)));if(change){setEdit(\"\");}else{setShow(newPost);setEdit(\"\");}}else{setShow(edit);setEdit(\"\");}}function noChanges(){setTitle(entry.title);setContent(entry.content);setChange(false);setEdit(\"\");}function closeOrNot(){if(entry.title!==title||entry.content!==content){setChange(true);}else{setChange(false);setEdit(\"\");}}return/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-inner-container\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:closeOrNot,className:\"close\",children:\"\\xD7\"}),change?/*#__PURE__*/_jsxs(\"div\",{className:\"change\",children:[\"save?\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"yes\",onClick:saveChanges,children:\"y\"}),\" / \",/*#__PURE__*/_jsx(\"span\",{className:\"no\",onClick:noChanges,children:\"n\"})]}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"modal-inner\",style:{backgroundColor:\"\".concat(entry.color)},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"small\",{children:entry.time}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setTitle(e.target.value);},value:title,type:\"text\",maxLength:\"35\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body modal-edit-body\",children:/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){return setContent(e.target.value);},value:content})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-icons\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return wannaSave(entry.id);},children:\"\\u2705\"}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return wannaRemove(entry.id);},children:\"\\u274C\"}),remove==entry.id?/*#__PURE__*/_jsxs(\"p\",{className:\"sure\",children:[\"delete? \",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return removePost(entry.id);},className:\"yes\",children:\"y\"}),\" / \",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setRemove(\"\");},className:\"no\",children:\"n\"})]}):null,save==entry.id?/*#__PURE__*/_jsxs(\"p\",{className:\"sure\",children:[\"save? \",/*#__PURE__*/_jsx(\"span\",{onClick:saveChanges,className:\"yes\",children:\"y\"}),\" / \",/*#__PURE__*/_jsx(\"span\",{onClick:noChanges,className:\"no\",children:\"n\"})]}):null]}),entry.updated!=\"\"?/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"small\",{children:[\"updated \",entry.updated]})}):null]})]})]})});}","map":{"version":3,"sources":["/Users/tim/DCI/Assignments/spa-final-project-blog/src/Components/EditModal.jsx"],"names":["React","useContext","useEffect","useState","ShowModalContext","PostContext","Time","EditModal","entry","posts","setPosts","show","setShow","edit","setEdit","title","setTitle","content","setContent","remove","setRemove","save","setSave","change","setChange","wannaRemove","id","wannaSave","removePost","newPosts","filter","post","close","e","key","window","addEventListener","removeEventListener","saveChanges","newPost","time","updated","color","noChanges","closeOrNot","backgroundColor","target","value"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\nimport ShowModalContext from '../Context/ShowModalContext';\nimport PostContext from '../Context/PostContext';\nimport Time from './Time';\n\nexport default function EditModal({entry}) {\n  const {posts, setPosts} = useContext(PostContext);\n  const {show, setShow, edit, setEdit} = useContext(ShowModalContext);\n\n  const [title,setTitle] = useState(entry.title);\n  const [content, setContent] = useState(entry.content);\n\n  const [remove, setRemove] = useState(\"\");\n  const [save, setSave] = useState(\"\");\n  const [change, setChange] = useState(false);\n\n  function wannaRemove(id){\n    remove == id ? setRemove(\"\") : setRemove(id); setSave(\"\");\n  }\n\n  function wannaSave(id){\n    if(entry.title !== title || entry.content !== content){\n      save == id ? setSave(\"\") : setSave(id); setRemove(\"\");\n    } else {\n      setShow(edit);\n      setEdit(\"\");\n    }\n  }\n\n  function removePost(id){\n    const newPosts = posts.filter((post)=>{\n      return post.id != id;\n    });\n    setEdit(\"\");\n    setPosts(newPosts);\n  }\n\n  useEffect(() => {\n    const close = (e) => e.key === 'Escape' ? setShow(\"\") : null;\n    window.addEventListener('keydown', close);\n    return () => window.removeEventListener('keydown', close);\n  },[]);\n\n  function saveChanges(){\n    if(entry.title !== title || entry.content !== content){\n      const newPosts = posts.filter((post)=>{\n        return post.id != entry.id;\n      });\n      const newPost = {id: entry.id, title: title, content: content, time: entry.time, updated:\"\"+Time(), color: entry.color};\n      setPosts([newPost, ...newPosts]);\n      if(change){\n        setEdit(\"\");\n      } else {\n        setShow(newPost);\n        setEdit(\"\");\n      }\n    } else {\n      setShow(edit);\n      setEdit(\"\");\n    }\n  }\n\n  function noChanges(){\n    setTitle(entry.title);\n    setContent(entry.content);\n    setChange(false);\n    setEdit(\"\");\n  }\n\n  function closeOrNot(){\n    if(entry.title !== title || entry.content !== content){\n      setChange(true);\n    } else {\n      setChange(false);\n      setEdit(\"\");\n    }\n  }\n\n  return (\n    <div className=\"modal\">\n      <div className=\"modal-inner-container\">\n        <div onClick={closeOrNot} className=\"close\">×</div>\n        {change ? <div className=\"change\">save?<br/><span  className=\"yes\" onClick={saveChanges}>y</span> / <span className=\"no\" onClick={noChanges}>n</span></div> : null}\n        <div className=\"modal-inner\" style={{backgroundColor: `${entry.color}`}}>\n          <div className=\"modal-header\">\n            <small>{entry.time}</small>\n            <input onChange={(e)=>setTitle(e.target.value)} value={title} type=\"text\" maxLength=\"35\"/>\n          </div>\n          <div className=\"modal-body modal-edit-body\">\n            <textarea onChange={(e)=>setContent(e.target.value)} value={content} ></textarea>\n          </div>\n          <div className=\"modal-footer\">\n            <div className=\"modal-icons\">\n              <div onClick={()=>wannaSave(entry.id)}>✅</div>\n              <div onClick={()=>wannaRemove(entry.id)}>❌</div>\n\n              {remove == entry.id ? <p className=\"sure\">delete? <span onClick={()=>removePost(entry.id)} className=\"yes\">y</span> / <span onClick={()=>setRemove(\"\")} className=\"no\">n</span></p> : null}\n\n              {save == entry.id ? <p className=\"sure\">save? <span onClick={saveChanges} className=\"yes\">y</span> / <span onClick={noChanges} className=\"no\">n</span></p> : null}\n\n            </div>\n            {entry.updated != \"\" ? <p><small>updated {entry.updated}</small></p> : null}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}